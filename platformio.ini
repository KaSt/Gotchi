; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = m5stack-cardputer
src_dir = src

; Common settings for all ESP32 boards
[env]
platform = espressif32@^6.8.1
framework = arduino
monitor_speed = 115200
monitor_filters = esp32_exception_decoder, colorize
upload_speed = 921600
board_build.partitions = default.csv

; Common build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DESP32
    -w

; Common libraries for all boards
lib_deps = 
    m5stack/M5Unified@^0.1.16
    m5stack/M5GFX@^0.1.16
    bblanchon/ArduinoJson@^7.2.0
    https://github.com/espressif/arduino-esp32.git#3.0.7

; Additional libs that may be needed
lib_extra_dirs = 

; ============================================================
; M5Stack Cardputer (ESP32-S3, 240x135 display, keyboard)
; RECOMMENDED DEVICE - Full keyboard support
; ============================================================
[env:m5stack-cardputer]
board = m5stack-stamps3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_CARDPUTER
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_Cardputer

; ============================================================
; M5StickC Plus2 (ESP32-PICO, 240x135 display, buttons)
; Compact form factor with physical buttons
; ============================================================
[env:m5stick-c-plus2]
board = m5stick-c
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STICK_C_PLUS2
    -DARDUINO_M5Stick_C_Plus2

; ============================================================
; M5StickC Plus (ESP32-PICO, 135x240 display, older model)
; ============================================================
[env:m5stick-c-plus]
board = m5stick-c
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STICK_C_PLUS
    -DARDUINO_M5Stick_C_Plus

; ============================================================
; M5StickC (Original, ESP32-PICO, 80x160 display)
; ============================================================
[env:m5stick-c]
board = m5stick-c
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STICK_C
    -DARDUINO_M5Stick_C

; ============================================================
; M5Atom S3 (ESP32-S3, 128x128 display, touch screen)
; Tiny display with touch navigation
; ============================================================
[env:m5stack-atoms3]
board = m5stack-atoms3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_ATOMS3
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_ATOMS3

; ============================================================
; M5Atom S3R (ESP32-S3, 128x128 display with rotary encoder)
; Enhanced version with rotary input
; ============================================================
[env:m5stack-atoms3r]
board = m5stack-atoms3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_ATOMS3R
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_ATOMS3R

; ============================================================
; M5Atom Lite (ESP32-PICO, RGB LED only, no display)
; Minimal version - LED-only feedback
; ============================================================
[env:m5stack-atom]
board = m5stack-atom
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_ATOM
    -DARDUINO_M5Stack_ATOM

; ============================================================
; M5Stack Core (ESP32, 320x240 display, large form factor)
; Classic M5Stack with full-sized display
; ============================================================
[env:m5stack-core-esp32]
board = m5stack-core-esp32
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_CORE_ESP32
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_Core_ESP32

; ============================================================
; M5Stack Core2 (ESP32, 320x240 touch display)
; Enhanced version with touch screen and vibration motor
; ============================================================
[env:m5stack-core2]
board = m5stack-core2
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_CORE2
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_Core2

; ============================================================
; M5Stack CoreS3 (ESP32-S3, 320x240 touch display)
; Latest generation with ESP32-S3
; ============================================================
[env:m5stack-cores3]
board = m5stack-cores3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_CORES3
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_CoreS3

; ============================================================
; M5Stack Fire (ESP32, 320x240, with PSRAM and extended features)
; Core with additional peripherals
; ============================================================
[env:m5stack-fire]
board = m5stack-fire
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_FIRE
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Stack_Fire

; ============================================================
; M5Paper (ESP32, 540x960 e-ink display)
; E-ink display for ultra-low power applications
; ============================================================
[env:m5stack-paper]
board = m5stack-fire
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_M5STACK_PAPER
    -DBOARD_HAS_PSRAM
    -DARDUINO_M5Paper

; ============================================================
; LilyGo T-Display S3 (ESP32-S3, 320x170 display)
; Popular alternative with USB-C and wide display
; ============================================================
[env:lilygo-t-display-s3]
board = lilygo-t-display-s3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_DISPLAY_S3
    -DBOARD_HAS_PSRAM
    -DTFT_WIDTH=320
    -DTFT_HEIGHT=170
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

; ============================================================
; LilyGo T-Display (ESP32, 240x135 display)
; Original T-Display with classic ESP32
; ============================================================
[env:lilygo-t-display]
board = esp32dev
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_DISPLAY
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=135

; ============================================================
; LilyGo T-Watch S3 (ESP32-S3, 240x240 round display)
; Smartwatch form factor
; ============================================================
[env:lilygo-t-watch-s3]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 16MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_WATCH_S3
    -DBOARD_HAS_PSRAM
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240

; ============================================================
; LilyGo T-Embed (ESP32-S3, 170x320 display with rotary encoder)
; Embedded display with physical controls
; ============================================================
[env:lilygo-t-embed]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_EMBED
    -DBOARD_HAS_PSRAM
    -DTFT_WIDTH=170
    -DTFT_HEIGHT=320

; ============================================================
; LilyGo T-Dongle S3 (ESP32-S3, 80x160 display)
; USB dongle form factor
; ============================================================
[env:lilygo-t-dongle-s3]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_qspi
board_build.flash_mode = qio
board_build.psram_type = qspi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_DONGLE_S3
    -DBOARD_HAS_PSRAM
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160

; ============================================================
; LilyGo T-QT Pro (ESP32-S3, 128x128 display)
; Compact square display
; ============================================================
[env:lilygo-t-qt-pro]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_LILYGO_T_QT_PRO
    -DBOARD_HAS_PSRAM
    -DTFT_WIDTH=128
    -DTFT_HEIGHT=128

; ============================================================
; Heltec WiFi LoRa 32 V3 (ESP32-S3, 128x64 OLED, LoRa radio)
; For extended range friend detection via LoRa
; ============================================================
[env:heltec-wifi-lora-32-v3]
board = heltec_wifi_lora_32_V3
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_HELTEC_WIFI_LORA_32_V3
    -DBOARD_HAS_PSRAM

; ============================================================
; Heltec Wireless Stick Lite (ESP32, 64x32 OLED, minimal)
; Compact stick form factor
; ============================================================
[env:heltec-wireless-stick-lite]
board = heltec_wireless_stick_lite
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_HELTEC_WIRELESS_STICK_LITE

; ============================================================
; ESP32-S3-DevKitC-1 (Generic ESP32-S3, no display)
; Generic development board for custom hardware
; ============================================================
[env:esp32-s3-devkitc-1]
board = esp32-s3-devkitc-1
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 8MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_ESP32S3_DEV
    -DBOARD_HAS_PSRAM

; ============================================================
; ESP32-C3-DevKitM-1 (ESP32-C3, RISC-V, no display)
; Low-cost RISC-V alternative
; ============================================================
[env:esp32-c3-devkitm-1]
board = esp32-c3-devkitm-1
board_build.mcu = esp32c3
board_build.f_cpu = 160000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_ESP32C3_DEV

; ============================================================
; TTGO T-Display (Alternative name for LilyGo)
; ============================================================
[env:ttgo-t-display]
board = esp32dev
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_TTGO_T_DISPLAY
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=135

; ============================================================
; DOIT ESP32 DevKit V1 (Generic ESP32, no display)
; Common generic development board
; ============================================================
[env:esp32-devkit-v1]
board = esp32doit-devkit-v1
board_build.mcu = esp32
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_upload.flash_size = 4MB
build_flags = 
    ${env.build_flags}
    -DARDUINO_ESP32_DEV
